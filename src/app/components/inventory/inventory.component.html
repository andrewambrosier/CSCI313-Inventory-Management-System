<p class="inventory-status">Inventory is up and running!</p>

<div class="inventory">
  <h1 class="main-title">Inventory Management</h1>

  <section>
     <!-- Category Filter -->
     <div class="d-flex gap-3 mb-4 align-items-end">
      <!-- Category Filter -->
      <div>
        <label class="form-label">Filter by Category</label>
        <select class="form-select" [(ngModel)]="selectedCategory" name="categoryFilter">
          <option value="">All</option>
          <option value="Seed">Seed</option>
          <option value="Fertilizer">Fertilizer</option>
          <option value="Pesticides">Pesticides</option>
          <option value="Veterinary Supplies">Veterinary Supplies</option>
          <option value="Feed">Feed</option>
        </select>
      </div>
    
      <!-- Search Input -->
      <div>
        <label class="form-label">Search by Name</label>
        <input
          type="text"
          class="form-control"
          placeholder="Enter item name..."
          [(ngModel)]="searchTerm"
          name="searchInput"
        />
      </div>
    </div>    
  </section>

  <!-- Farm Supply List -->
  <section class="farm-supply-list">
    <h2>Farm Supply List</h2>
    <table class="table">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Name</th>
          <th scope="col">Quantity</th>
          <th scope="col">Category</th>
          <th scope="col">Expiration Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of getFilteredItems()">
          <td>{{ item.id }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.category }}</td>
          <td>{{ item.expirationDate | date : "yyyy-MM-dd" }}</td>
          <td>
            <button class="btn btn-sm btn-secondary" (click)="editSupply(item)">Edit</button>
          </td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Add Items Form -->
  <section class="add-items">
    <h2>{{isEditing ? 'Edit Item' : 'Add New Item'}}</h2>
    <form (submit)="isEditing ? updateSupply() : addSupply()">
      <div class="form-group">
        <label for="name" class="form-label">Item Name</label>
        <input type="text" class="form-control" id="name" [(ngModel)]="newItem.name" name="name" required />
      </div>
      <div class="form-group">
        <label for="quantity" class="form-label">Quantity</label>
        <input type="number" class="form-control" id="quantity" [(ngModel)]="newItem.quantity" name="quantity" required />
      </div>
      <div class="form-group">
        <label for="category" class="form-label">Category</label>
        <select class="form-select" id="category" [(ngModel)]="newItem.category" name="category">
          <option value="Seed">Seed</option>
          <option value="Fertilizer">Fertilizer</option>
          <option value="Pesticides">Pesticides</option>
          <option value="Veterinary Supplies">Veterinary Supplies</option>
          <option value="Feed">Feed</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">{{ isEditing ? 'Update Supply' : 'Add Supply' }}</button>
      <hr *ngIf="isEditing">
      <button *ngIf="isEditing" type="button" class="btn btn-secondary ms-2" (click)="cancelEdit()">Cancel</button>
    </form>
  </section>

  <!-- Stock Levels -->
  <section class="stock-levels">
    <h2>Stock Levels</h2>
    <div *ngFor="let item of inventoryItems" class="stock-item">
      <label>{{ item.name }} ({{ item.quantity }}/{{ item.maxStock }})</label>
      <div class="progress">
        <div
          class="progress-bar"
          [style.width]="getStockPercentage(item) + '%'"
          [ngClass]="{
            'bg-danger': getStockPercentage(item) < 30,
            'bg-warning': getStockPercentage(item) < 60,
            'bg-success': getStockPercentage(item) >= 60
          }"
        >
          {{ getStockPercentage(item) }}%
        </div>
      </div>
    </div>
  </section>
</div>
