<p>inventory works!</p>
<div class="inventory">
  <h1>Inventory</h1>

  <!-- Farm Supply List: Displays a table of inventory items with their ID, name, quantity, category, and expiration date -->

  <h2>Farm Supply List</h2>
  <!-- Creates a table to list all of the supply Items showing ID, Name, Quantity,
  Category, Expiration Date-->
  <table class="table">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Name</th>
        <th scope="col">Quantity</th>
        <th scope="col">Category</th>
        <th scope="col">Expiration Date</th>
      </tr>
    </thead>
    <tbody>
      <!-- Iterates through inventoryItems and displays their details -->

      <tr *ngFor="let item of inventoryItems">
        <td>{{ item.id }}</td>
        <td>{{ item.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.category }}</td>
        <td>{{ item.expirationDate | date : "yyyy-MM-dd" }}</td>
      </tr>
    </tbody>
  </table>
  <!-- Form to add new supply items -->

  <h2>Add Items</h2>
  <form (submit)="addSupply()" class="mb-4">
    <div class="mb-3">
      <label for="name" class="form-label">Item Name</label>
      <input
        type="text"
        class="form-control"
        id="name"
        [(ngModel)]="newItem.name"
        required
      />
    </div>
    <div class="mb-3">
      <label for="quantity" class="form-label">Quantity</label>
      <input
        type="number"
        class="form-control"
        id="quantity"
        [(ngModel)]="newItem.quantity"
        required
      />
    </div>
    <div class="mb-3">
      <label for="category" class="form-label">Category</label>
      <select class="form-select" id="category" [(ngModel)]="newItem.category">
        <option value="Seed">Seed</option>
        <option value="Fertilizer">Fertilizer</option>
        <option value="Pesticides">Pesticides</option>
        <option value="Veterinary Supplies">Veterinary Supplies</option>
        <option value="Feed">Feed</option>
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Add Supply</button>
  </form>
  <!-- Stock Levels: Progress bars show how much of each item is in stock -->

  <h2>Stock Levels</h2>
  <div *ngFor="let item of inventoryItems" class="mb-3">
    <!--creates progress bars for each Item in stock-->
    <label>{{ item.name }} ({{ item.quantity }}/{{ item.maxStock }})</label>
    <div
      class="progress"
      role="progressbar"
      aria-valuemin="0"
      aria-valuemax="100"
    >
      <div
        class="progress-bar"
        [style.width]="getStockPercentage(item) + '%'"
        [ngClass]="{
          'bg-danger': getStockPercentage(item) < 30,
          'bg-warning': getStockPercentage(item) < 60,
          'bg-success': getStockPercentage(item) >= 60
        }"
      >
        {{ getStockPercentage(item) }}%
      </div>
    </div>
  </div>
  <!-- Dropdown to filter inventory items by category -->

  <h2>Items Status</h2>
  <div class="dropdown">
    <button
      class="btn btn-primary dropdown-toggle"
      type="button"
      id="categoryDropdown"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      Choose a Category
    </button>
    <ul class="dropdown-menu" aria-labelledby="categoryDropdown">
      <li>
        <a class="dropdown-item" href="#" (click)="selectCategory('Seed')"
          >Seed</a
        >
      </li>
      <li>
        <a class="dropdown-item" href="#" (click)="selectCategory('Fertilizer')"
          >Fertilizer</a
        >
      </li>
      <li>
        <a class="dropdown-item" href="#" (click)="selectCategory('Pesticides')"
          >Pesticides</a
        >
      </li>
      <li>
        <a
          class="dropdown-item"
          href="#"
          (click)="selectCategory('Veterinary Supplies')"
          >Veterinary Supplies</a
        >
      </li>
      <li>
        <a class="dropdown-item" href="#" (click)="selectCategory('Feed')"
          >Feed</a
        >
      </li>
    </ul>
  </div>
  <!-- Displays items filtered by the selected category -->

  <div *ngIf="selectedCategory">
    <h2>{{ selectedCategory }} Items</h2>
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Stock Quantity</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of getFilteredItems()">
          <td>{{ item.id }}</td>
          <td>{{ item.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>
            <span
              *ngIf="item.quantity === item.maxStock"
              class="badge bg-success"
              >Fully Stocked</span
            >
            <span
              *ngIf="item.quantity < item.restockThreshold"
              class="badge bg-danger"
              >Needs Immediate Restocking</span
            >
            <span
              *ngIf="
                item.quantity >= item.restockThreshold &&
                item.quantity < item.maxStock
              "
              class="badge bg-warning"
              >Low Stock</span
            >
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
